participant Task
participant Interpreter
participant Document

Task->Interpreter: parse
activate Interpreter
Interpreter->Document: new
activate Document
Task->Interpreter: preprocess
loop scan document
  Interpreter->Document: bookmark
end

Task->Interpreter: process
loop evaluate document
  Interpreter->Document: evaluate
end

Task->Interpreter: postprocess
loop finalize document
  Interpreter->Document: replace_placeholder
end

Interpreter-->Task: output